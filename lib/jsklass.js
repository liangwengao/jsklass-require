"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const isArray=e=>"array"===getType(e),isArrayLike=e=>{let t=!!e&&"length"in e&&e.length,n=getType(e);if("function"===n||isWindow(e))return!1;return"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e},mergeArray=(e,t)=>{each(t,(t,n)=>{e.push(n)});return e};var Arrays=Object.freeze({isArray:isArray,isArrayLike:isArrayLike,mergeArray:mergeArray});const isString=e=>"string"===getType(e),exit=e=>{throw new Error(e)},error=(e,t)=>{isEmpty(e)||isEmpty(t)?console.error(e):console.error(e,t)},warn=(e,t)=>{isEmpty(e)||isEmpty(t)?console.warn(e):console.warn(e,t)},info=(e,t)=>{isEmpty(e)||isEmpty(t)?console.info(e):console.info(e,t)},log=(e,t)=>{isEmpty(e)||isEmpty(t)?console.log(e):console.log(e,t)};var Console=Object.freeze({exit:exit,error:error,warn:warn,info:info,log:log});const isFunction=e=>"function"===getType(e),evil=e=>{try{return new Function("return "+e)()}catch(e){exit(e)}};var Functions=Object.freeze({isFunction:isFunction,evil:evil});const isObject=e=>"object"===getType(e),mergeObject=(e,t)=>{each(t,(t,n)=>{e[t]=n});return e},shallowCopyObject=(e,t)=>{each(t,function(n,i){t.propertyIsEnumerable(n)&&(e[n]=i)});return e},isJson=e=>{try{if(isString(e)){let t=JSON.parse(e);return!(!isObject(t)||!t)}if(isObject(e)){let t=JSON.stringify(e);return!(!isString(t)||!t)}}catch(e){return!1}},inJson=(e,t)=>{let n=!1;if(!isJson(e)||!isString(t))return n;each(e,(e,i)=>{if(e===t)return n=!0,!1});return n};let class2type={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error","[object Symbol]":"symbol"},sToString=class2type.toString,sHasOwn=class2type.hasOwnProperty,sFnToString=sHasOwn.toString,sObjectFunctionString=sFnToString.call(Object);const recursionGetAttr=(e,t)=>{try{if(t=t||[],!e||!t||t.length<=0)return e;let n=t.shift(),i=e[n];return t.length>0?recursionGetAttr(i,t):i}catch(e){return""}},getType=e=>{if(null===e)return e+"";return"object"==typeof e||"function"==typeof e?class2type[sToString.call(e)]||"object":typeof e},isEmpty=e=>{if(void 0===e||null===e||""===e||void 0===e)return!0;if(isArray(e)||isObject(e)){let t=0;for(let n in e)t++;if(t<=0)return!0}return!1},getDefaultVal=(e,t,n)=>{n=n||"";e=isObject(e)?e:{};if(isEmpty(t)||isObject(t))return n;let i=t.split(".");let r=recursionGetAttr(e,i);if(isEmpty(r))return n;return r},each=(e,t)=>{let n,i=0;if(isArrayLike(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},reverseEach=(e,t)=>{let n;if(isArrayLike(e))for(let i=(n=e.length)-1;i>=0&&!1!==t.call(e[i],i,e[i]);i--);else{let n=[];each(e,function(e,t){n.push(e)}),n.sort(function(e,t){return t-e});let i=function(t){let n={};return each(e,function(e,i){if(e.toString()===t.toString())return n=i,!1}),n};each(n,function(e,n){if(!1===t.call(i(n),n,i(n)))return!1})}return e},seal=e=>Object.seal(e),freeze=e=>Object.freeze(e),isWindow=e=>void 0!==e&&e===e.window,isBrowserSide=()=>"undefined"!=typeof window;let oLifetimeUuid=[],sLifetimeKey="";const generateLifetimeUid=function(){let e=[],t="0123456789abcdef",n="";for(let n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]=t.substr(Math.ceil(Math.random()*t.length),1),e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",n=e.join(""),oLifetimeUuid.indexOf(n)>-1?generateLifetimeUid():(oLifetimeUuid.push(n),n)},getLifetimeKey=function(){if(isEmpty(sLifetimeKey)){let e=[];for(let t=0;t<8;t++)e[t]="0123456789ABCDEF".substr(Math.floor(16*Math.random()),1);sLifetimeKey=e.join("")}return sLifetimeKey},ClassExtends=function(e,t){const n=(e,t)=>{if(!t&&!isFunction(t))return e;e=e.concat(t.constructor||t);if(t._vd_){let i=t._vd_.getSuper(getLifetimeKey());if(!isEmpty(i))return n(e,i)}return e};this.handle=(()=>n(e,t))},ClassInterfaceExtends=function(e,t){const n=(e,t)=>{if(!t&&!isFunction(t))return i(e);if(t._vd_){let i=t._vd_.getInterfaces(getLifetimeKey()),r=t._vd_.getSuper(getLifetimeKey());if(e=mergeArray(e,i),!isEmpty(r))return n(e,r)}return i(e)},i=e=>{let t=[];each(e,(e,n)=>{t.indexOf(n)<0&&t.push(n)});return t};this.handle=(()=>n(e,t))},ConstKeyWord=["class_name","super_class_name","interface_name","static","super","prototype","constructor","lifetime_uid","_vd_","instanceOfInterface","instanceOfClass","$class_name","$super_class_name","$interface_name","$static","$super","$prototype","$constructor","$lifetime_uid","$_vd_","$instanceOfInterface","$instanceOfClass"],ClassKeyWord=["class_name","super_class_name","interface_name","super","prototype","constructor","lifetime_uid","_vd_","instanceOfInterface","instanceOfClass","$class_name","$super_class_name","$interface_name","$super","$prototype","$constructor","$lifetime_uid","$_vd_","$instanceOfInterface","$instanceOfClass"],validateRule=(e,t)=>{const n=/^[a-zA-Z0-9_$]+$/i;let i=[],r=[],c=[],s="",o="prototype",a=!1,f=!1,u=!1,l=!1,p=!1;each(t,function(e,t){let m=t.self,y=t.prototype,d=t.static,_=t.const;return each(y,function(e,t){if("_construct"===e)return s=e,o="prototype",f=!0,!1;if("$_construct"===e)return s=e,o="prototype",a=!0,!1;if(ClassKeyWord.indexOf(e)>-1)return s=e,o="prototype",u=!0,!1;if(hasFinalName(e)){let t=filterFinalName(e);if(i.indexOf(t)>-1)return s=t,o="prototype",p=!0,!1;i.push(t)}else if(i.indexOf(e)>-1)return s=e,o="prototype",p=!0,!1}),!(p||u||a||f)&&(each(m,function(e,t){if("$_construct"===e)return s=e,o="self",a=!0,!1;if(ClassKeyWord.indexOf(e)>-1)return s=e,o="self",u=!0,!1;if(hasFinalName(e)){let t=filterFinalName(e);if(i.indexOf(t)>-1)return s=t,o="self",p=!0,!1;i.push(t)}else if(i.indexOf(e)>-1)return s=e,o="self",p=!0,!1}),!(p||u||a||f)&&(each(_,function(e,t){return n.test(e)?ConstKeyWord.indexOf(e)>-1?(s=e,o="const",u=!0,!1):r.indexOf(e)>-1?(s=e,o="const",p=!0,!1):void 0:(s=e,o="const",l=!0,!1)}),!(p||u||a||f||l)&&void each(d,function(e,t){return ClassKeyWord.indexOf(e)>-1?(s=e,o="static",u=!0,!1):c.indexOf(e)>-1?(s=e,o="static",p=!0,!1):void 0})))});if(f)return exit(`${e} 类中的 [${o}] 成员名称不允许是：${s}`),!1;if(u)return exit(`${e} 类中的 [${o}] 成员名称不可是关键词：${s}`),!1;if(p)return exit(`${e} 类中的 [${o}]: ${s} 是final类型不可覆写`),!1;if(a)return exit(`${e} 类中的 [${o}]: ${s} 构造函数不允许设置为final类型！`),!1;if(l)return exit(`${e} 类中的 [${o}]: ${s} 名称必须[a-zA-Z0-9_$]方式命名`),!1;return!0},hasFinalName=e=>{return 0===e.indexOf("$")},filterFinalName=e=>{e=0===e.indexOf("$")?e.replace("$",""):e;return e},Implement=function(e,t,n,i,r,c){let s=["interface_name","lifetime_uid","toString"],o=/%self%/g,a=/%const%/g,f=/%static%/g;const u=e=>e.replace(/[\s+]/g,"").replace(/\{(.*)\}/g,"{}"),l=e=>e.replace(/function\(/g,"(").replace(/\)/g,")=>"),p=e=>{let t=null,n=null;o.test(e)?(t="self",n=e.replace(o,"")):a.test(e)?(t="const",n=e.replace(a,"")):f.test(e)&&(t="static",n=e.replace(f,""));return{type:t,name:n}},m=e=>{let t="",n=!1;switch(e.type){case"function":n=!0,t="function("+e.args.join(",")+"){}";break;case"object":n=!0,t="[object]";break;case"string":n=!0,t="[string]";break;case"number":n=!0,t="[number]";break;default:n=!1,t="[*]"}return{type:e.type,check:n,value:t}},y=(e,t,n,i,r)=>{let c=r.replace(/[\s+]/g,"");if(!e[t])return t+(c?"="+c:"");let s=e[t],o=s.toString(),a=getType(s);if(i)switch(n){case"function":if("function"!==a)return t+(c?"="+c:"");if(u(r)!==u(o)||l(u(r))!==l(u(o)))return t+(c?"="+c:"");break;case"object":if("object"!==a)return t+(c?"="+c:"");break;case"string":if("string"!==a)return t+(c?"="+c:"");break;case"number":if("number"!==a)return t+(c?"="+c:"")}return null},d=function(e){return isBrowserSide()?e:l(e)};this.handle=(()=>{if(isEmpty(r))return!1;let o={},a=new function(){},f=null,u=null,l=null;each(t,function(e,t){each(getDefaultVal(t,"self",{}),function(e,t){hasFinalName(e)&&(e=filterFinalName(e)),o[e]=t})});r=isArray(r)?r:[r];each(r,function(e,t){t.apply(a,[])});each(a,(e,t)=>{if(s.indexOf(e)<0){let r=p(e),s=m(t),a=r.name,d=s.value,_=s.type,g=s.check;switch(r.type){case"self":if(ClassKeyWord.indexOf(a)<0&&((f=y(o,a,_,g,d))&&(f=y(c,a,_,g,d)),f))return!1;break;case"const":if(ConstKeyWord.indexOf(a)<0&&(l=y(n,a,_,g,d)))return!1;break;case"static":if(u=y(i,a,_,g,d))return!1;break;default:exit("非法定义的接口体")}}});f&&exit(e+"的类必须实现接口: self."+d(f));l&&exit(e+"的类必须实现接口: const."+d(l));u&&exit(e+"的类必须实现接口: static."+d(u));o=a=null;return!0})},PropertyHandler=function(e,t,n){let i=this,r=t,c={},s={},o={},a={},f={};i.setConst=(e=>{isObject(e)&&(s=e)&&(o=shallowCopyObject({},s));return i}),i.setStatic=(e=>{isObject(e)&&(a=e)&&(f=shallowCopyObject({},a));return i}),i.handle=(()=>{each(r,function(e,t){let i={};i="const"===n?t.const:"static"===n?t.static:t.prototype,isEmpty(i)||(c[t.class_name]=i)});s=shallowCopyObject(s,o);a=shallowCopyObject(a,f);each(c,(t,n)=>{each(n,(t,n)=>{e[t]=n});return!0});c={};s={};o={};a={};f={};return e})},validateClass=(e,t,n,i)=>{const r=/^[A-Z][A-Za-z0-9_]+$/g,c="function(?,?){}";e||exit(`没有给定类名`);isString(e)||exit(`类名必须是string类型: ${e}`);r.test(e)||exit(`类命名定义不规范,必须是以大写字母开头: ${e}`);t||exit(`没有定义类结构体: ${e}`);isFunction(t)||exit(`类结构体必须是function类型: ${e}`);const s=t.toString().replace(/[\s+]/g,"").replace(/\{(.*)+\}$/g,"{}").replace(/\((.*)\)/g,"(?,?)");c!==s&&exit(`类结构体定义不规范，必须是 ${c} 格式: ${e}`);n&&(isFunction(n)||exit(`类继承的结构体必须是function类型:${e}`),(isEmpty(n.class_name)||isEmpty(n.lifetime_uid)||isEmpty(n._vd_)||isEmpty(n._vd_.getLifetimeCode(getLifetimeKey())))&&exit(`类继承的结构体不规范:${e}`),isFunction(n)||exit(`类继承的结构体不规范，必须是 ${c} 格式:${e}`));i&&(i=isArray(i)?i:[i],each(i,function(t,n){isFunction(n)||exit(`接口的结构体必须是function类型: ${e}`),(isEmpty(n.interface_name)||isEmpty(n.lifetime_uid)||isEmpty(n._vd_)||isEmpty(n._vd_.getLifetimeCode(getLifetimeKey())))&&exit(`接口的结构体不规范: ${e}`),isFunction(n)||exit(`接口的结构体不规范，必须是 ${c} 格式: ${e}`)}));return!0},VHConstruct=e=>`function(GV, oSupers, oCallSupersConstruct, oSupersConstructList){ oSupers["_construct"] = function(){ if(oCallSupersConstruct.indexOf('${e}') > -1 ){ GV.oConsole.exit("构造函数只允许在创建对象时调用！");} oCallSupersConstruct.push('${e}'); oSupersConstructList['${e}'].apply(this, arguments); }}`,VHClass=(e,t,n)=>{let i={0:{}},r=[0],c={},s=0,o=n,a={},f=shallowCopyObject({},e.oStatic);reverseEach(e.oConstructorList,function(n,o){let f={},u=i[s],l={},p={},m={},y=function(){let e=this;each(p,function(t,n){e[t]=n})};o.apply(t,[t,seal(e.oConst),e.oStatic,freeze(u),l]),n>0&&o.apply(f,[f,seal({}),freeze({}),freeze(u),{}]),s++,each(f,function(n,i){if(isFunction(i))if("_construct"===n)c[s]=t[n],evil(VHConstruct(s))(e,p,r,c);else{let e=filterFinalName(n);t.propertyIsEnumerable(n)&&(p[e]=t[n])}}),each(u,function(e,t){u.propertyIsEnumerable(e)&&!p[e]&&(p[e]=t)}),each(a,function(e,t){each(t,function(e,t){m[e]=t})}),each(l,function(t,n){let i=filterFinalName(t);m[i]=n,e.oPrototype[i]=n}),y.prototype=m,i[s]=new y,a[s]=l});each(t,function(e,n){hasFinalName(e)&&(Object.defineProperty(t,filterFinalName(e),{value:n,writable:!1,enumerable:!0,configurable:!1}),delete t[e])});e.oStatic=shallowCopyObject(e.oStatic,f);t._construct&&(t._construct.apply(t,o),delete t._construct);each(i,function(e,t){e=parseInt(e),r.indexOf(e)<0&&r.push(e)});a=null},VHPrototype=e=>`function(LV, GV){\n            if(GV.oFunctions.isFunction(GV.oPrototype['${e}'])){            \n              LV['${e}'] = function (){\n              var sl = this, \n              fn = GV.oFunctions.proxyApplyFunc(GV.oPrototype['${e}'], \n              GV.oArrays.convertArgsToArray(arguments), sl); \n              return (fn && fn());}\n            }else{\n              LV['${e}'] = GV.oPrototype['${e}'];\n            }\n          }`,VHInterface=(e,t)=>{reverseEach(e.oConstructorList,function(e,n){let i=new n;each(i,(e,n)=>{t[e]=n})});each(e.oSelf,(e,n)=>{t["%self%"+e]=n});e.oConst&&each(e.oConst,(e,n)=>{t["%const%"+e]=n});e.oStatic&&each(e.oStatic,(e,n)=>{t["%static%"+e]=n})},convertCode=e=>getLifetimeKey()+"@"+e,instanceOfClass=e=>{let t={};t[e.lifetime_uid]=e.class_name;isEmpty(e.super_class_name)||(t=mergeObject(t,e.super_class_name));return e=>{if(isEmpty(e.lifetime_uid)||isEmpty(e._vd_)||isEmpty(e.class_name))return!1;let n=e._vd_.getLifetimeCode(getLifetimeKey()),i="";each(t,(e,t)=>{let r=convertCode(e);if(r===n)return i=t,!1});return i===e.class_name}},instanceOfInterface=e=>{let t=e.interface_name;return e=>{if(isEmpty(e.lifetime_uid)||isEmpty(e._vd_)||isEmpty(e.interface_name))return!1;let n=e._vd_.getLifetimeCode(getLifetimeKey()),i="";each(t,(e,t)=>{let r=convertCode(e);if(r===n)return i=t,!1});return i===e.interface_name}},instanceOf=e=>{let t=convertCode(e.lifetime_uid),n=e.interface_name;return e=>{if(isEmpty(e.lifetime_uid)||isEmpty(e._vd_)||isEmpty(e.interface_name))return!1;let i="",r=e.interface_name;each(r,(e,n)=>{let r=convertCode(e);if(r===t)return i=n,!1});return n===i}},getInterfaces=e=>t=>{let n=[];t===getLifetimeKey()&&(n=isEmpty(e)?[]:e);return n},getLifetimeCode=e=>t=>{let n=e;t===getLifetimeKey()&&(n=convertCode(e));return n},getSuper=e=>t=>{let n=[];t===getLifetimeKey()&&(n=isEmpty(e)?null:e);return n},toString=(e,t)=>()=>e+"@"+t,resolveClass=e=>{let t=[];reverseEach(e,function(e,n){let i={},r={},c={},s={};n.apply(i,[i,s,c,freeze({}),r]),t.push({class_name:n.class_name,self:i,prototype:r,static:c,const:s})});return t},Class=function(e,t,n,i){let r={},c={},s={},o=[],a={},f={},u={},l={oKlass:s,oConst:u,oStatic:f,oConstructorList:t,oPrototype:a,oConsole:Console,handler:VHClass};const p=t,m=n,y=generateLifetimeUid(),d=(e,t)=>{"INTERFACE"===t?inJson(r,e.lifetime_uid)||(r[e.lifetime_uid]=e.interface_name):inJson(c,e.lifetime_uid)||(c[e.lifetime_uid]=e.class_name);if(e._vd_){let n=e._vd_.getSuper(getLifetimeKey());!isEmpty(n)&&d(n,t)}},_=`function (GV){\n           GV.oKlass = function ${e}() {\n              GV.handler(GV, this, arguments);\n           };\n         }\n       `;if(!validateClass(e,t,n,i))return!1;if(i=isArray(i)?i:isEmpty(i)?[]:[i],i=new ClassInterfaceExtends(i,m).handle(),t.class_name=p.class_name=e,t.lifetime_uid=p.lifetime_uid=y,t.interface_name=p.interface_name=r,t=[t],n="function"===getType(n)?n.prototype:{},t=new ClassExtends(t,m).handle(),isEmpty(i)||each(i,function(e,t){d(t,"INTERFACE")}),each(t,function(e,t){e>0&&d(t,"CLASS")}),o=resolveClass(t),!validateRule(e,o))return!1;u=new PropertyHandler(u,o,"const").handle(),f=new PropertyHandler(f,o,"static").setConst(u).handle(),a=new PropertyHandler(a,o,"class").setConst(u).setStatic(f).handle();let g=function(){this.class_name=e,this.super_class_name=c,this.interface_name=r,this.lifetime_uid=y,this.instanceOfClass=instanceOfClass(this),this.instanceOfInterface=instanceOfInterface(this),this.toString=toString(y,e),this._vd_=freeze({getLifetimeCode:getLifetimeCode(y)})},h=function(){let e=this,t=[];each(a,function(n,i){hasFinalName(n)&&(n=filterFinalName(n),t.push(n)),"_construct"!==n&&evil(VHPrototype(n))(e,{oArrays:Arrays,oFunctions:Functions,oPrototype:a})}),each(e,function(n,i){t.indexOf(n)>-1&&Object.defineProperty(e,n,{value:i,writable:!1,enumerable:!0,configurable:!1})}),t=[]};return g.prototype=n,h.prototype=new g,l.oConstructorList=t,evil(_)(l),s=l.oKlass,s.constructor=p,s.prototype=new h,s.static=f,s.class_name=e,s.super_class_name=c,s.interface_name=r,s.lifetime_uid=y,s.instanceOfClass=instanceOfClass(s),s.instanceOfInterface=instanceOfInterface(s),s.toString=toString(y,e),s._vd_=freeze({getInterfaces:getInterfaces(i),getLifetimeCode:getLifetimeCode(y),getSuper:getSuper(m)}),s=mergeObject(s,u),new Implement(e,o,u,f,i,a).handle(),freeze(s)},InterfaceExtends=function(e,t){const n=(e,t)=>{if(!t&&"function"!==getType(t))return e;e=e.concat(t.constructor||t);if(t._vd_){let i=t._vd_.getSuper(getLifetimeKey());if(!isEmpty(i))return n(e,i)}return e};this.handle=(()=>n(e,t))},checkInterfaceType=e=>{let t=null;each(e,(e,n)=>{if("InterfaceType"!==n.name)return t=e,!1});return t},validateInterface=(e,t,n,i,r)=>{const c=/^[A-Z][A-Za-z0-9_]+$/g,s=/^[A-Z_$]+$/i;let o=[],a=!1,f=!1,u="",l=!1,p=!1;e||exit(`没有给定接口名`);isString(e)||exit(`接口名必须是string类型: ${e}`);c.test(e)||exit(`接口命名定义不规范,必须是以大写字母开头: ${e}`);if(t){isObject(t)||exit(`接口self结构体必须是object类型: ${e}`),isJson(t)||exit(`接口self结构体必须是{}格式: ${e}`);const n=checkInterfaceType(t);n&&exit(`接口self结构体的值类型不合法，必须是InterfaceType类型: ${e} -> ${n}`);const i=JSON.stringify(t).replace(/[\s+]/g,"").replace(/\{(.*)\}/g,"{}");if("{}"!==i&&exit(`接口self结构体不规范，必须是 {} 格式: ${e}`),each(t,function(e,t){if("$_construct"===e)return u=e,f=!0,!1;if(ClassKeyWord.indexOf(e)>-1)return u=e,a=!0,!1;if(hasFinalName(e)){let t=filterFinalName(e);if(o.indexOf(t)>-1)return u=t,l=!0,!1;o.push(t)}else if(o.indexOf(e)>-1)return u=e,l=!0,!1}),a)return exit(`${e} 接口中self定义的名称不可使用关键：${u}`),!1;if(f)return exit(`${e} 接口中self的 ${u} 构造函数不允许设置为final类型！`),!1;if(l)return exit(`接口self结构体定义的名称已存在：${u}`),!1}if(i){isObject(i)||exit(`接口static的结构体必须是object类型: ${e}`),isJson(i)||exit(`接口static结构体必须是{}格式: ${e}`);const t=JSON.stringify(i).replace(/[\s+]/g,"").replace(/\{(.*)\}/g,"{}");"{}"!==t&&exit(`接口static的结构体定义不规范，必须是 {} 格式: ${e}`);const n=checkInterfaceType(i);n&&exit(`接口static结构体的值类型不合法，必须是InterfaceType类型: ${e} -> ${n}`)}if(n){isObject(n)||exit(`接口const的结构体必须是object类型: ${e}`),isJson(n)||exit(`接口const结构体必须是{}格式: ${e}`);const t=JSON.stringify(n).replace(/[\s+]/g,"").replace(/\{(.*)\}/g,"{}");"{}"!==t&&exit(`接口const的结构体定义不规范，必须是 {} 格式: ${e}`);const i=checkInterfaceType(n);if(i&&exit(`接口const结构体的值类型不合法，必须是InterfaceType类型: ${e} -> ${i}`),each(n,function(e,t){return s.test(e)?ConstKeyWord.indexOf(e)>-1?(u=e,a=!0,!1):void 0:(u=e,p=!0,!1)}),a)return exit(`${e} 接口中Const定义的名称不可使用关键：${u}`),!1;p&&exit(`${e} 接口中Const定义的名称必须全部以大写命名：${u}`)}r&&(isFunction(r)||exit(`接口继承的结构体必须是function类型: ${e}`),(isEmpty(r.interface_name)||isEmpty(r.lifetime_uid)||isEmpty(r._vd_)||isEmpty(r._vd_.getLifetimeCode(getLifetimeKey())))&&exit(`接口继承的结构体定义不规范: ${e}`),isFunction(r)||exit(`接口继承的结构体定义不规范，必须是 function(?,?){} 格式: ${e}`));o=[];return!0},Interface=function(e,t,n,i,r){let c=[],s=isObject(t)?t:{},o={},a={oInterface:o,oConstructorList:c,handler:VHInterface,oStatic:i,isStaticHandle:!1,oConst:n,oSelf:s};const f=r,u=generateLifetimeUid(),l=`function(GV){\n      GV.oInterface = function ${e}() {\n        GV.handler(GV, this);\n      };\n    }`;if(!validateInterface(e,s,n,i,r))return!1;c=new InterfaceExtends(c,f).handle();let p=function(){this.interface_name=e,this.lifetime_uid=u,this.toString=toString(u,e)};return a.oConstructorList=c,evil(l)(a),o=a.oInterface,o.constructor=o,o.interface_name=e,o.prototype=new p,o.lifetime_uid=u,o.instanceOfClass=instanceOf(o),o.toString=toString(u,e),o._vd_=freeze({getLifetimeCode:getLifetimeCode(u),getSuper:getSuper(f)}),Object.freeze(o)},InterfaceTypeRule=function(e,t){this.name="InterfaceType",this.type=e,this.args=t},InterfaceType={function:function(){let e=[];return each(arguments,(t,n)=>{e.push(n)}),Object.freeze(new InterfaceTypeRule("function",e))},objects:function(){return Object.freeze(new InterfaceTypeRule("object",""))},string:function(){return Object.freeze(new InterfaceTypeRule("string",""))},number:function(){return Object.freeze(new InterfaceTypeRule("number",""))},all:function(){return Object.freeze(new InterfaceTypeRule("all",""))}},DefClass=(e,t,n,i)=>new Class(e,t,n,i),DefInterface=(e,t,n,i,r)=>new Interface(e,t,n,i,r);exports.DefClass=DefClass,exports.DefInterface=DefInterface,exports.InterfaceType=InterfaceType;
